# Distraction Blocker Configuration
# This file gets embedded into the compiled binary

# Development mode - bypasses mindful delays for faster testing
dev: false

# Log level: debug, info, warn, error
log_level: "info"

# Enable/disable each blocking mechanism
enable_hosts: true
enable_firewall: true
enable_forbidden_programs: true

# Self-healing and protection features
enable_self_healing: false      # Monitors and re-applies protections every 30 seconds

# How often to run the main enforcement loop (in seconds)
enforce_interval_seconds: 60    # Default: 60 seconds (1 minute)

tamper_detection:
  enabled: true
  check_interval_seconds: 30
  alarm_command: "mpg123 /home/noufal/Downloads/high-battery-sound.mp3"

# Paths (leave empty for defaults)
hosts_path: "/etc/hosts"


# Mindful delay for uninstall (seconds)
mindful_delay: 60

# Disable sudoers
sudoers:
  enabled: true
  user: "noufal"
  allowed_sudoers_line: "noufal  ALL=(ALL) NOPASSWD:ALL"
  blocked_sudoers_line: "noufal  ALL=(ALL) ALL"  # Requires password
  # blocked_sudoers_line: "# noufal ALL=(ALL) NOPASSWD:ALL"
  time_allowed:
    - start: "09:00"
      end: "17:00"
      days: ["Mon", "Tue", "Wed", "Thu", "Fri"] #, "Sat", "Sun"]
    - start: "09:00"
      end: "21:00"
      days: ["Sat", "Sun"]




# Domains to block
domains:
  # Always blocked sites - These are ALWAYS blocked, 24/7
  - name: "reddit.com"
    always_block: true
    absolute: true  # Cannot be temporarily unblocked
  
  - name: "twitter.com"
    always_block: true
    absolute: true  # Cannot be temporarily unblocked
  
  - name: "facebook.com"
    always_block: true
  
  - name: "instagram.com"
    always_block: true
  
  # Time-based blocking - Only blocked during specific hours
  - name: "youtube.com"
    always_block: false
    time_windows:
      # Blocked during work hours on weekdays
      - start: "09:00"
        end: "17:00"
        days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
      # Also blocked in the evening (to encourage sleep)
      - start: "19:00"
        end: "21:00"
        days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
  
  - name: "news.ycombinator.com"
    always_block: false
    time_windows:
      - start: "09:00"
        end: "12:00"
        days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
      - start: "14:00"
        end: "17:00"
        days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
  
  - name: "netflix.com"
    always_block: false
    time_windows:
      # Block Netflix before 6 PM on weekdays
      - start: "00:00"
        end: "18:00"
        days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
  
  # Add more domains here as needed
  # Examples:
  # - name: "tiktok.com"
  #   always_block: true
  # 
  # - name: "linkedin.com"
  #   always_block: false
  #   time_windows:
  #     - start: "09:00"
  #       end: "17:00"
  #       days: ["Mon", "Tue", "Wed", "Thu", "Fri"]

# Accountability and notifications
accountability:
  enabled: false
  partner_email: "partner@example.com"
  from_email: "glocker@yourdomain.com"
  api_key: "your-mailgun-api-key"
  daily_report_enabled: false
  daily_report_time: "18:00"

# Web tracking - detects when blocked sites are accessed
web_tracking:
  enabled: false
  command: "mpg123 /home/noufal/Downloads/high-battery-sound.mp3"  # Command to run when blocked site is accessed

# Content monitoring - logs reports from browser extensions
content_monitoring:
  enabled: false
  log_file: "/var/log/glocker-reports.log"  # File to log content reports

# Keywords for browser extension blocking
extension_keywords:
  url_keywords: ["gambling", "casino", "porn", "xxx", "bet", "poker"]
  content_keywords: ["trigger1", "trigger2", "inappropriate", "distraction"]
  whitelist: ["github.com", "stackoverflow.com", "docs.google.com"]

# Desktop notifications - shows popup notifications for various events
notification_command: "notify-send -u {urgency} -i {icon} '{title}' '{message}'"

# Panic mode - emergency offline enforcement
# Suspends the system and re-suspends if woken early until duration expires
# Use rtcwake for auto-wake after duration, or pm-suspend for manual wake
panic_command: "rtcwake -m mem -s {duration_seconds}"
# Alternative: panic_command: "pm-suspend"

# Violation tracking - execute command when violations exceed threshold
violation_tracking:
  enabled: true
  max_violations: 5                    # Maximum violations before triggering command
  time_window_minutes: 60              # Time window to count violations (60 minutes)
  command: "i3lock -c 000000"          # Command to execute (e.g., lock screen)
  reset_daily: true                    # Reset violation count daily
  reset_time: "00:00"                  # Time to reset violations (HH:MM format)

# Unblocking configuration - controls temporary unblocking behavior
unblocking:
  reasons: ["work", "research", "emergency", "medical", "education"]  # Valid reasons for unblocking
  log_file: "/var/log/glocker-unblocks.log"                          # File to log unblock requests
  temp_unblock_time: 30                                               # How long domains stay unblocked (minutes)

# Forbidden programs - kills specified programs during time windows
forbidden_programs:
  enabled: true
  check_interval_seconds: 5  # How often to check for forbidden programs
  programs:
    - name: "steam"
      time_windows:
        - start: "09:00"
          end: "17:00"
          days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
    - name: "discord"
      time_windows:
        - start: "09:00"
          end: "17:00"
          days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
    - name: "game"  # This will match any process containing "game"
      time_windows:
        - start: "09:00"
          end: "17:00"
          days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
